# üöÄ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Go

> –ù–∞–¥–µ–∂–Ω–æ–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å MySQL master-slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö! üíæ

![–í–µ—Ä—Å–∏—è Go](https://img.shields.io/badge/Go-1.25.3+-00ADD8?style=for-the-badge&logo=go)
![MySQL](https://img.shields.io/badge/MySQL-8.0-4479A1?style=for-the-badge&logo=mysql)
![Docker](https://img.shields.io/badge/Docker-–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ-2496ED?style=for-the-badge&logo=docker)

## üìñ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MySQL master-slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ Go-–±—ç–∫–µ–Ω–¥–∞. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö! üéØ

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üèó **Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è** - 1 Master + 3 Slave —É–∑–ª–∞
- üê≥ **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** - –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–µ–∑–µ—Ä–≤** - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
- ‚ö° **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö slave-—É–∑–ª–∞—Ö
- üîí **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ACID —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è** - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TB
    A[Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] --> B[MySQL Master]
    B --> C[Slave 1]
    B --> D[Slave 2]
    B --> E[Slave 3]
    
    style A fill:#74c0fc
    style B fill:#ff8787
    style C fill:#51cf66
    style D fill:#51cf66
    style E fill:#51cf66
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫


| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|---------|
| **–ë—ç–∫–µ–Ω–¥** | ![Go](https://img.shields.io/badge/Go-00ADD8?logo=go&logoColor=white) | –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π API-—Å–µ—Ä–≤–µ—Ä |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | ![MySQL](https://img.shields.io/badge/MySQL-4479A1?logo=mysql&logoColor=white) | –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | ![Docker](https://img.shields.io/badge/Docker-2496ED?logo=docker&logoColor=white) | –ò–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è** | ![Docker Compose](https://img.shields.io/badge/Docker_Compose-2496ED?logo=docker&logoColor=white) | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—É–ª—å—Ç–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- üê≥ [Docker](https://docs.docker.com/get-docker/) 
- üê≥ [Docker Compose](https://docs.docker.com/compose/install/)
- ‚öôÔ∏è [Go 1.25.3+](https://golang.org/dl/) (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone https://github.com/FollG/go-database-replication.git
   cd go-database-replication
    ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
   ```bash
   # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Master + 3 Slave + Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
   docker-compose up -d
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç**
   ```bash
   docker-compose ps
   ```
   ‚úÖ –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 5 –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤!

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏**
   ```bash
   # –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ master –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å slave-–æ–≤
   docker-compose exec mysql-master mysql -uroot -psecret -e "SHOW SLAVE HOSTS;"
   ```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
go-database-replication/
‚îú‚îÄ‚îÄ üìÅ app/                 # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.go            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database/          # –õ–æ–≥–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ üìÅ config/             # –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ master.cnf         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MySQL Master
‚îÇ   ‚îî‚îÄ‚îÄ slave.cnf          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MySQL Slave
‚îú‚îÄ‚îÄ üìÅ scripts/            # –°–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ docker-compose.yml     # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º—É–ª—å—Ç–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª üéâ
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è


| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|-------------|
| `DB_MASTER_HOST` | `mysql-master` | –•–æ—Å—Ç master-–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `DB_MASTER_PORT` | `3306` | –ü–æ—Ä—Ç master-–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `DB_SLAVE_HOSTS` | `slave1,slave2,slave3` | –°–ø–∏—Å–æ–∫ slave-—Ö–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `DB_USER` | `app_user` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î |
| `DB_PASSWORD` | `app_password` | –ü–∞—Ä–æ–ª—å –ë–î |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

### –ó–∞–ø–∏—Å—å –≤ Master
```bash
# –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ master-—É–∑–ª–µ
curl -X POST http://localhost:8080/api/data \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello from Master!"}'
```

### –ß—Ç–µ–Ω–∏–µ –∏–∑ Slave
```bash
# –≠—Ç–æ –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –∏–∑ slave-—É–∑–ª–æ–≤ (round-robin)
curl http://localhost:8080/api/data
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Connection Refused**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω—ã –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
   docker-compose ps
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ master
   docker-compose logs mysql-master
   ```

2. **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å slave
   docker-compose exec mysql-slave1 mysql -uroot -psecret -e "SHOW SLAVE STATUS\G"
   ```

3. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å
   docker network ls
   docker network inspect go-database-replication_default
   ```

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ú—ã —Ä–∞–¥—ã contributions! üéâ –í–æ—Ç –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–æ—á—å:

1. üç¥ –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫ –ø—Ä–æ–µ–∫—Ç–∞
2. üåø –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. üíæ –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. üì§ –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. üîÉ –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MySQL –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Docker –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–µ –≥–∞–π–¥—ã –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Go –∑–∞ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

---

<div align="center">

**‚≠ê –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω! ‚≠ê**

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏ ‚òï –æ—Ç [FollG](https://github.com/FollG)

</div>
